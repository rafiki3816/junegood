<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Journals</title>
</head>
<body>
    <h1>Journal Loading Test</h1>
    <div id="test-output"></div>

    <script>
        const output = document.getElementById('test-output');

        function log(message) {
            output.innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        log('Starting test...');

        // Test 1: Fetch journals-index.json
        fetch('/data/journals-index.json')
            .then(response => {
                log('Index fetch status: ' + response.status);
                if (!response.ok) throw new Error('Failed to fetch index');
                return response.json();
            })
            .then(data => {
                log('Index loaded, found ' + data.journals.length + ' journals');

                // Test 2: Fetch first journal
                if (data.journals.length > 0) {
                    const firstJournal = data.journals[0];
                    log('Attempting to fetch: ' + firstJournal.file);

                    return fetch(firstJournal.file);
                }
            })
            .then(response => {
                log('Journal fetch status: ' + response.status);
                return response.json();
            })
            .then(journal => {
                log('Successfully loaded journal: ' + journal.title);
                log('Content preview: ' + journal.content.substring(0, 100) + '...');
            })
            .catch(error => {
                log('ERROR: ' + error.message);
                console.error(error);
            });
    </script>
</body>
</html>